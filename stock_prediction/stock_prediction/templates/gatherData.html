<!DOCTYPE html>
<html>
  <head>
    <title>Stock Ticker Input</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <h1>Enter a Stock Ticker:</h1>
    <input type="text" id="tickerInput" />
    <button type="button" onclick="displayTicker()">Submit</button>

    <p id="tickerOutput"></p>

    <script>
      function displayTicker() {
        const ticker = document.getElementById('tickerInput').value.toUpperCase();
        $.ajax({
          url: `/income_statement/${ticker}`,
          dataType: 'json',
          success: function(data) {
            const output = document.getElementById('tickerOutput');
            let html = '<table><thead><tr><th>Fiscal Date Ending</th>';
            for (const key in data) {
              html += `<th>${key}</th>`;
            }
            html += '</tr></thead><tbody>';
            for (const field in data[Object.keys(data)[0]]) {
              html += `<tr><td>${field}</td>`;
              for (const key in data) {
                html += `<td>${data[key][field]}</td>`;
              }
              html += '</tr>';
            }
            html += '</tbody></table>';
            output.innerHTML = html;
          }
        });
      }      
    </script>
  </body>
</html>
